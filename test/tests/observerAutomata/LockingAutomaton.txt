NAME LockingAutomaton
// Kommentar
/* Kommentar */
LOCAL int lock

INITIAL STATE Init {
  MATCH { "init()" } -> ASS {lock == 0} DO { lock = 0 } GOTO Unlocked
  MATCH { "lock()" } -> GOTO ERR
  MATCH { "unlock()" } -> GOTO ERR
}

STATE Locked {
  MATCH { "init()" } ->  GOTO ERR
  MATCH { "lock()" } ->  GOTO ERR
  MATCH { "unlock()" } -> ASS {lock == 1}  DO { lock = 0 } GOTO Unlocked
}

STATE Unlocked {
  MATCH { "init()" } ->  GOTO ERR
  MATCH { "lock()" } -> ASS {lock == 0}  DO { lock = 1 } GOTO Locked
  MATCH { "unlock()" } -> GOTO ERR
}